/* 
 * FULLSCREEN АДАПТАЦИЯ С НУЛЯ (REFACTORED)
 * Единая Grid-система для всех устройств
 */

/* === БАЗОВАЯ СТРУКТУРА === */
.main-container {
  width: 100vw;
  height: 100vh; /* Fallback */
  height: 100dvh; /* Dynamic Viewport Height для мобильных браузеров */
  margin: 0;
  padding: 0;
  display: grid;
  /* По умолчанию: десктоп - фиксированные уши, центр резиновый */
  grid-template-columns: 320px 1fr 320px;
  grid-template-rows: 1fr;
  grid-template-areas: "left center right";
  gap: 0;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 2;
  box-sizing: border-box;
  overflow: hidden;
  background-color: #0a0505;
}

.left-panel {
  grid-area: left;
  height: 100%;
  /* Left panel can scroll nicely */
  overflow-y: auto;
  overflow-x: hidden;
  padding: 20px;
  box-sizing: border-box;
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 107, 69, 0.3) rgba(0, 0, 0, 0.2);
}

.center-stage {
  grid-area: center;
  height: 100%;
  overflow: hidden; 
  padding: 20px 10px;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
}

.right-panel {
  grid-area: right;
  height: 100%;
  /* ВАЖНО: Правая панель НЕ скроллится сама, скроллится список внутри */
  overflow: hidden; 
  padding: 20px;
  box-sizing: border-box;
  display: flex; /* Делаем flex container, чтобы record-book растягивался */
  flex-direction: column;
}

/* === АДАПТИВНОСТЬ === */

/* 1. Крупный десктоп (>= 1600px) */
@media (min-width: 1600px) {
  .main-container {
    grid-template-columns: 360px 1fr 360px;
  }
}

/* 2. Стандартный десктоп (1200px - 1599px) */
@media (min-width: 1200px) and (max-width: 1599px) {
  .main-container {
    grid-template-columns: 320px 1fr 300px;
  }
  .left-panel, .right-panel {
    padding: 15px;
  }
}

/* 3. Маленький десктоп / Планшет (Горизонтально) (900px - 1199px) */
@media (min-width: 900px) and (max-width: 1199px) {
  .main-container {
    grid-template-columns: 1fr 320px;
    grid-template-areas: "center right";
  }
  
  .left-panel {
    display: none;
  }
}

/* 4. Планшет (Вертикально) / Крупный мобильный (600px - 899px) */
@media (max-width: 899px) {
  .main-container {
    grid-template-columns: 1fr;
    grid-template-rows: 1fr auto;
    grid-template-areas:
      "center"
      "right";
    overflow-y: auto; /* Разрешаем скролл всей страницы */
    display: flex;
    flex-direction: column;
    position: relative;
    height: auto;
    min-height: 100dvh;
  }

  .left-panel {
    display: none;
  }

  .center-stage {
    height: auto;
    min-height: 60vh;
    overflow: visible;
  }

  .right-panel {
    height: auto;
    border-top: 1px solid rgba(255, 107, 69, 0.3);
    overflow: visible; /* На мобилках разрешаем скролл */
    display: block; /* Возвращаем блочное поведение на мобилках */
  }
}

/* 5. Мобильные (<= 599px) */
@media (max-width: 599px) {
  .center-stage {
    padding: 10px;
  }
  
  .right-panel {
    padding: 15px;
  }
}

/* === ВЫСОТА ЭКРАНА === */
@media (max-height: 750px) and (min-width: 900px) {
  .center-stage {
    padding: 10px 5px;
  }
  .left-panel, .right-panel {
    padding: 10px; /* Уменьшаем отступы на низких экранах */
  }
}
